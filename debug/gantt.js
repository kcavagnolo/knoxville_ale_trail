let routeData = {
    "bbox": [-84.1482036, 35.7085336, -83.521008, 36.211719],
    "crs": {
        "properties": {
            "name": "urn:ogc:def:crs:OGC:1.3:CRS84"
        },
        "type": "name"
    },
    "features": [{
        "geometry": {
            "coordinates": [-84.148204, 35.902887],
            "type": "Point"
        },
        "id": 0,
        "properties": {
            "abs_arrival_time": 1583604000,
            "abs_departure_time": 1583604000,
            "abs_service_time_start": 1583604000,
            "address": "10936 Parkside Dr, Knoxville, TN 37934, United States",
            "appointment": false,
            "arrival_time": "2020-03-07T13:00:00-05:00",
            "departure_time": "2020-03-07T13:00:00-05:00",
            "description": "home",
            "distance_from_prev": 0,
            "distance_to_next": 13767.2,
            "dropoff_position_in_route": -1,
            "end": 1583604000000,
            "id": "route_1_stop_0",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.9028866,
            "location_id": "home",
            "locked": false,
            "longitude": -84.1482036,
            "marker-color": "#f9f91c",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Home",
            "order_id": "NA",
            "order_ids_dropped_off": [],
            "order_index": -1,
            "position_in_route": 0,
            "priority": -1,
            "service_start_time": "2020-03-07T13:00:00-05:00",
            "service_time": 0,
            "start": 1583604000000,
            "stop_type": "start_location",
            "title": "route 1 stop 0",
            "travel_time_from_prev": 0,
            "travel_time_from_prev_no_traffic": 0,
            "travel_time_to_next": 895,
            "travel_time_to_next_no_traffic": 788,
            "y": 0
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-84.01588, 35.93154],
            "type": "Point"
        },
        "id": 1,
        "properties": {
            "abs_arrival_time": 1583604895,
            "abs_departure_time": 1583610295,
            "abs_service_time_start": 1583604895,
            "address": "100 Lockett Rd, Knoxville, TN 37919, United States",
            "appointment": false,
            "arrival_time": "2020-03-07T13:14:55-05:00",
            "departure_time": "2020-03-07T14:44:55-05:00",
            "description": "abridged beer company",
            "distance_from_prev": 13767.2,
            "distance_to_next": 5713.8,
            "dropoff_position_in_route": -1,
            "end": 1583610295000,
            "id": "route_1_stop_1",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.93154,
            "location_id": "abridged beer company",
            "locked": false,
            "longitude": -84.01588,
            "marker-color": "#f9f91c",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Abridged Beer Company",
            "order_id": "abridged beer company",
            "order_ids_dropped_off": [],
            "order_index": 0,
            "position_in_route": 1,
            "priority": 0,
            "service_start_time": "2020-03-07T13:14:55-05:00",
            "service_time": 5400,
            "start": 1583604895000,
            "stop_type": "order",
            "title": "route 1 stop 1",
            "travel_time_from_prev": 895,
            "travel_time_from_prev_no_traffic": 788,
            "travel_time_to_next": 556,
            "travel_time_to_next_no_traffic": 447,
            "y": 0
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-83.96377, 35.95316],
            "type": "Point"
        },
        "id": 2,
        "properties": {
            "abs_arrival_time": 1583610851,
            "abs_departure_time": 1583616251,
            "abs_service_time_start": 1583610851,
            "address": "2924 Sutherland Ave, Knoxville, TN 37919, United States",
            "appointment": false,
            "arrival_time": "2020-03-07T14:54:11-05:00",
            "departure_time": "2020-03-07T16:24:11-05:00",
            "description": "albright grove brewing company",
            "distance_from_prev": 5713.8,
            "distance_to_next": 9153.3,
            "dropoff_position_in_route": -1,
            "end": 1583616251000,
            "id": "route_1_stop_2",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.95316,
            "location_id": "albright grove brewing company",
            "locked": false,
            "longitude": -83.96377,
            "marker-color": "#f9f91c",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Albright Grove Brewing Company",
            "order_id": "albright grove brewing company",
            "order_ids_dropped_off": [],
            "order_index": 1,
            "position_in_route": 2,
            "priority": 0,
            "service_start_time": "2020-03-07T14:54:11-05:00",
            "service_time": 5400,
            "start": 1583610851000,
            "stop_type": "order",
            "title": "route 1 stop 2",
            "travel_time_from_prev": 556,
            "travel_time_from_prev_no_traffic": 447,
            "travel_time_to_next": 661,
            "travel_time_to_next_no_traffic": 596,
            "y": 0
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-83.90311, 35.95975],
            "type": "Point"
        },
        "id": 3,
        "properties": {
            "abs_arrival_time": 1583616912,
            "abs_departure_time": 1583622312,
            "abs_service_time_start": 1583616912,
            "address": "1130 Sevier Ave, Knoxville, TN 37920, United States",
            "appointment": false,
            "arrival_time": "2020-03-07T16:35:12-05:00",
            "departure_time": "2020-03-07T18:05:12-05:00",
            "description": "alliance brewing co",
            "distance_from_prev": 9153.3,
            "distance_to_next": 599.1,
            "dropoff_position_in_route": -1,
            "end": 1583622312000,
            "id": "route_1_stop_3",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.95975,
            "location_id": "alliance brewing co",
            "locked": false,
            "longitude": -83.90311,
            "marker-color": "#f9f91c",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Alliance Brewing Co",
            "order_id": "alliance brewing co",
            "order_ids_dropped_off": [],
            "order_index": 13,
            "position_in_route": 3,
            "priority": 0,
            "service_start_time": "2020-03-07T16:35:12-05:00",
            "service_time": 5400,
            "start": 1583616912000,
            "stop_type": "order",
            "title": "route 1 stop 3",
            "travel_time_from_prev": 661,
            "travel_time_from_prev_no_traffic": 596,
            "travel_time_to_next": 58,
            "travel_time_to_next_no_traffic": 47,
            "y": 0
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-83.89669, 35.96062],
            "type": "Point"
        },
        "id": 4,
        "properties": {
            "abs_arrival_time": 1583622370,
            "abs_departure_time": 1583627770,
            "abs_service_time_start": 1583622370,
            "address": "1532 Island Home Ave, Knoxville, TN 37920, United States",
            "appointment": false,
            "arrival_time": "2020-03-07T18:06:10-05:00",
            "departure_time": "2020-03-07T19:36:10-05:00",
            "description": "printshop beer co",
            "distance_from_prev": 599.1,
            "distance_to_next": 58014,
            "dropoff_position_in_route": -1,
            "end": 1583627770000,
            "id": "route_1_stop_4",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.96062,
            "location_id": "printshop beer co",
            "locked": false,
            "longitude": -83.89669,
            "marker-color": "#f9f91c",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Printshop Beer Co",
            "order_id": "printshop beer co",
            "order_ids_dropped_off": [],
            "order_index": 20,
            "position_in_route": 4,
            "priority": 0,
            "service_start_time": "2020-03-07T18:06:10-05:00",
            "service_time": 5400,
            "start": 1583622370000,
            "stop_type": "order",
            "title": "route 1 stop 4",
            "travel_time_from_prev": 58,
            "travel_time_from_prev_no_traffic": 47,
            "travel_time_to_next": 3639,
            "travel_time_to_next_no_traffic": 3559,
            "y": 0
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-83.521008, 35.708534],
            "type": "Point"
        },
        "id": 5,
        "properties": {
            "abs_arrival_time": 1583631409,
            "abs_departure_time": 1583636809,
            "abs_service_time_start": 1583631409,
            "address": "1004 Parkway, Gatlinburg, TN 37738, United States",
            "appointment": false,
            "arrival_time": "2020-03-07T20:36:49-05:00",
            "departure_time": "2020-03-07T22:06:49-05:00",
            "description": "smoky mountain brewery",
            "distance_from_prev": 58014,
            "distance_to_next": 14307.9,
            "dropoff_position_in_route": -1,
            "end": 1583636809000,
            "id": "route_1_stop_5",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.7085336,
            "location_id": "smoky mountain brewery",
            "locked": false,
            "longitude": -83.521008,
            "marker-color": "#f9f91c",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Smoky Mountain Brewery",
            "order_id": "smoky mountain brewery",
            "order_ids_dropped_off": [],
            "order_index": 11,
            "position_in_route": 5,
            "priority": 0,
            "service_start_time": "2020-03-07T20:36:49-05:00",
            "service_time": 5400,
            "start": 1583631409000,
            "stop_type": "order",
            "title": "route 1 stop 5",
            "travel_time_from_prev": 3639,
            "travel_time_from_prev_no_traffic": 3559,
            "travel_time_to_next": 1140,
            "travel_time_to_next_no_traffic": 1062,
            "y": 0
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-83.57124, 35.80219],
            "type": "Point"
        },
        "id": 6,
        "properties": {
            "abs_arrival_time": 1583637949,
            "abs_departure_time": 1583643349,
            "abs_service_time_start": 1583637949,
            "address": "131 The Island Dr, Pigeon Forge, TN 37863, United States",
            "appointment": false,
            "arrival_time": "2020-03-07T22:25:49-05:00",
            "departure_time": "2020-03-07T23:55:49-05:00",
            "description": "yee haw brewing co ",
            "distance_from_prev": 14307.9,
            "distance_to_next": 68381,
            "dropoff_position_in_route": -1,
            "end": 1583643349000,
            "id": "route_1_stop_6",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.80219,
            "location_id": "yee haw brewing co ",
            "locked": false,
            "longitude": -83.57124,
            "marker-color": "#f9f91c",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Yee Haw Brewing Co ",
            "order_id": "yee haw brewing co ",
            "order_ids_dropped_off": [],
            "order_index": 12,
            "position_in_route": 6,
            "priority": 0,
            "service_start_time": "2020-03-07T22:25:49-05:00",
            "service_time": 5400,
            "start": 1583637949000,
            "stop_type": "order",
            "title": "route 1 stop 6",
            "travel_time_from_prev": 1140,
            "travel_time_from_prev_no_traffic": 1062,
            "travel_time_to_next": 3601,
            "travel_time_to_next_no_traffic": 3601,
            "y": 0
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-84.148204, 35.902887],
            "type": "Point"
        },
        "id": 7,
        "properties": {
            "abs_arrival_time": 1583646950,
            "abs_departure_time": 1583646950,
            "abs_service_time_start": 1583646950,
            "address": "10936 Parkside Dr, Knoxville, TN 37934, United States",
            "appointment": false,
            "arrival_time": "2020-03-08T00:55:50-05:00",
            "departure_time": "2020-03-08T00:55:50-05:00",
            "description": "home",
            "distance_from_prev": 68381,
            "distance_to_next": 0,
            "dropoff_position_in_route": -1,
            "end": 1583646950000,
            "id": "route_1_stop_7",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.9028866,
            "location_id": "home",
            "locked": false,
            "longitude": -84.1482036,
            "marker-color": "#f9f91c",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Home",
            "order_id": "NA",
            "order_ids_dropped_off": [],
            "order_index": -1,
            "position_in_route": 7,
            "priority": -1,
            "service_start_time": "2020-03-08T00:55:50-05:00",
            "service_time": 0,
            "start": 1583646950000,
            "stop_type": "end_location",
            "title": "route 1 stop 7",
            "travel_time_from_prev": 3601,
            "travel_time_from_prev_no_traffic": 3601,
            "travel_time_to_next": 0,
            "travel_time_to_next_no_traffic": 0,
            "y": 0
        },
        "type": "Feature"
    }],
    "metadata": {
        "abs_route_end_time": 1583646950,
        "abs_route_start_time": 1583604000,
        "abs_shift_end_time": 1583647200,
        "abs_shift_start_time": 1583604000,
        "average_bearing": "E",
        "breaks": [],
        "end": 1583646950000,
        "floating_breaks": [],
        "id": "route_1",
        "itinerary": [{
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-07T13:00:00-05:00",
            "time_to": "2020-03-07T13:14:55-05:00"
        }, {
            "action": "service order abridged beer company",
            "time_from": "2020-03-07T13:14:55-05:00",
            "time_to": "2020-03-07T14:44:55-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-07T14:44:55-05:00",
            "time_to": "2020-03-07T14:54:11-05:00"
        }, {
            "action": "service order albright grove brewing company",
            "time_from": "2020-03-07T14:54:11-05:00",
            "time_to": "2020-03-07T16:24:11-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-07T16:24:11-05:00",
            "time_to": "2020-03-07T16:35:12-05:00"
        }, {
            "action": "service order alliance brewing co",
            "time_from": "2020-03-07T16:35:12-05:00",
            "time_to": "2020-03-07T18:05:12-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-07T18:05:12-05:00",
            "time_to": "2020-03-07T18:06:10-05:00"
        }, {
            "action": "service order printshop beer co",
            "time_from": "2020-03-07T18:06:10-05:00",
            "time_to": "2020-03-07T19:36:10-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-07T19:36:10-05:00",
            "time_to": "2020-03-07T20:36:49-05:00"
        }, {
            "action": "service order smoky mountain brewery",
            "time_from": "2020-03-07T20:36:49-05:00",
            "time_to": "2020-03-07T22:06:49-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-07T22:06:49-05:00",
            "time_to": "2020-03-07T22:25:49-05:00"
        }, {
            "action": "service order yee haw brewing co ",
            "time_from": "2020-03-07T22:25:49-05:00",
            "time_to": "2020-03-07T23:55:49-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-07T23:55:49-05:00",
            "time_to": "2020-03-08T00:55:50-05:00"
        }],
        "max_num_items_in_vehicle": 0,
        "max_segment_length": 68381,
        "max_segment_time": 3639,
        "max_volume_in_vehicle": 0,
        "max_weight_in_vehicle": 0,
        "metrics": [],
        "name": "Route 1",
        "num_breaks": 0,
        "num_floating_breaks": 0,
        "num_soft_breaks": 0,
        "num_stops": 8,
        "route_distance": 169936.3,
        "route_end_location_id": "home",
        "route_end_time": "2020-03-08T00:55:50-05:00",
        "route_id": "Vehicle:uber-Shift:crawl_shift_2",
        "route_start_location_id": "home",
        "route_start_time": "2020-03-07T13:00:00-05:00",
        "route_traffic_time": 450,
        "route_travel_time": 10550,
        "route_working_time": 42950,
        "shift_end_time": "2020-03-08T01:00:00",
        "shift_id": "crawl_shift_2",
        "shift_start_time": "2020-03-07T13:00:00",
        "slack_time": 250,
        "soft_breaks": [],
        "start": 1583604000000,
        "start_items": [],
        "total_break_time": 0,
        "total_floating_break_time": 0,
        "total_idle_time": 0,
        "total_items_delivered": [],
        "total_items_picked_up": [],
        "total_soft_break_time": 0,
        "vehicle_id": "uber"
    },
    "type": "FeatureCollection"
};

// Parse stop data into series
var stopData = routeData.features.map(function (feature, i) {
    feature.properties['color'] = '#FF0000';
    return feature.properties;
});
stopData.push(routeData.metadata);

var series = [{
    name: "Route 0",
    data: stopData
}];

console.log(series);

var defined = Highcharts.defined;
var map = Highcharts.map;
var reduce = Highcharts.reduce;
Highcharts.ganttChart('gantt-container', {
    series: series,
    tooltip: {
        pointFormatter: function () {
            var point = this;
            var lines = [{
                title: 'Arrive',
                value: new Date(point.arrival_time).toLocaleString()
            }, {
                title: 'Depart',
                value: new Date(point.departure_time).toLocaleString()
            }];
            return reduce(lines, function (str, line) {
                var s = '',
                    style = (
                        defined(line.style) ? line.style : 'font-size: 1.0em;'
                    );
                if (line.visible !== false) {
                    s = (
                        '<span style="' + style + '">' +
                        (defined(line.title) ? line.title + ': ' : '') +
                        (defined(line.value) ? line.value : '') +
                        '</span><br/>'
                    );
                }
                return str + s;
            }, '');
        }
    },
    title: {
        text: 'Knoxville Ale Trail Route'
    },
    xAxis: {
        currentDateIndicator: true
    },
    yAxis: {
        type: 'category',
        grid: {
            columns: [{
                categories: map(series, function (s) {
                    return s.name;
                })
            }]
        }
    }
});