routeData = {
    "bbox": [-84.1482036, 35.9028866, -83.9149333, 36.00828],
    "crs": {
        "properties": {
            "name": "urn:ogc:def:crs:OGC:1.3:CRS84"
        },
        "type": "name"
    },
    "features": [{
        "geometry": {
            "coordinates": [-84.148204, 35.902887],
            "type": "Point"
        },
        "id": 0,
        "properties": {
            "abs_arrival_time": 1583532000,
            "abs_departure_time": 1583532000,
            "abs_service_time_start": 1583532000,
            "address": "10936 Parkside Dr, Knoxville, TN 37934, United States",
            "appointment": false,
            "arrival_time": "2020-03-06T17:00:00-05:00",
            "departure_time": "2020-03-06T17:00:00-05:00",
            "description": "home",
            "distance_from_prev": 0,
            "distance_to_next": 25767.4,
            "dropoff_position_in_route": -1,
            "end": 1583532000000,
            "id": "route_0_stop_0",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.9028866,
            "location_id": "home",
            "locked": false,
            "longitude": -84.1482036,
            "marker-color": "#ff0000",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Home",
            "order_id": "NA",
            "order_ids_dropped_off": [],
            "order_index": -1,
            "parent": "route_0",
            "position_in_route": 0,
            "priority": -1,
            "service_start_time": "2020-03-06T17:00:00-05:00",
            "service_time": 0,
            "start": 1583532000000,
            "stop_type": "start_location",
            "title": "route 0 stop 0",
            "travel_time_from_prev": 0,
            "travel_time_from_prev_no_traffic": 0,
            "travel_time_to_next": 1493,
            "travel_time_to_next_no_traffic": 1245
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-83.94067, 35.99062],
            "type": "Point"
        },
        "id": 1,
        "properties": {
            "abs_arrival_time": 1583533493,
            "abs_departure_time": 1583538893,
            "abs_service_time_start": 1583533493,
            "address": "2419 N Central St, Knoxville, TN 37917, United States",
            "appointment": false,
            "arrival_time": "2020-03-06T17:24:53-05:00",
            "departure_time": "2020-03-06T18:54:53-05:00",
            "description": "elst brewing company",
            "distance_from_prev": 25767.4,
            "distance_to_next": 249.3,
            "dropoff_position_in_route": -1,
            "end": 1583538893000,
            "id": "route_0_stop_1",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.99062,
            "location_id": "elst brewing company",
            "locked": false,
            "longitude": -83.94067,
            "marker-color": "#ff0000",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Elst Brewing Company",
            "order_id": "elst brewing company",
            "order_ids_dropped_off": [],
            "order_index": 7,
            "parent": "route_0",
            "position_in_route": 1,
            "priority": 0,
            "service_start_time": "2020-03-06T17:24:53-05:00",
            "service_time": 5400,
            "start": 1583533493000,
            "stop_type": "order",
            "title": "route 0 stop 1",
            "travel_time_from_prev": 1493,
            "travel_time_from_prev_no_traffic": 1245,
            "travel_time_to_next": 30,
            "travel_time_to_next_no_traffic": 25
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-83.94267, 35.99217],
            "type": "Point"
        },
        "id": 2,
        "properties": {
            "abs_arrival_time": 1583538923,
            "abs_departure_time": 1583544323,
            "abs_service_time_start": 1583538923,
            "address": "2735 N Central St, Knoxville, TN 37917, United States",
            "appointment": false,
            "arrival_time": "2020-03-06T18:55:23-05:00",
            "departure_time": "2020-03-06T20:25:23-05:00",
            "description": "fanatic brewing co ",
            "distance_from_prev": 249.3,
            "distance_to_next": 2773.7,
            "dropoff_position_in_route": -1,
            "end": 1583544323000,
            "id": "route_0_stop_2",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.99217,
            "location_id": "fanatic brewing co ",
            "locked": false,
            "longitude": -83.94267,
            "marker-color": "#ff0000",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Fanatic Brewing Co ",
            "order_id": "fanatic brewing co ",
            "order_ids_dropped_off": [],
            "order_index": 8,
            "parent": "route_0",
            "position_in_route": 2,
            "priority": 0,
            "service_start_time": "2020-03-06T18:55:23-05:00",
            "service_time": 5400,
            "start": 1583538923000,
            "stop_type": "order",
            "title": "route 0 stop 2",
            "travel_time_from_prev": 30,
            "travel_time_from_prev_no_traffic": 25,
            "travel_time_to_next": 209,
            "travel_time_to_next_no_traffic": 203
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-83.94812, 36.00828],
            "type": "Point"
        },
        "id": 3,
        "properties": {
            "abs_arrival_time": 1583544532,
            "abs_departure_time": 1583549932,
            "abs_service_time_start": 1583544532,
            "address": "1002 Dutch Valley Dr, Knoxville, TN 37918, United States",
            "appointment": false,
            "arrival_time": "2020-03-06T20:28:52-05:00",
            "departure_time": "2020-03-06T21:58:52-05:00",
            "description": "hexagon brewing company",
            "distance_from_prev": 2773.7,
            "distance_to_next": 13291.4,
            "dropoff_position_in_route": -1,
            "end": 1583549932000,
            "id": "route_0_stop_3",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 36.00828,
            "location_id": "hexagon brewing company",
            "locked": false,
            "longitude": -83.94812,
            "marker-color": "#ff0000",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Hexagon Brewing Company",
            "order_id": "hexagon brewing company",
            "order_ids_dropped_off": [],
            "order_index": 9,
            "parent": "route_0",
            "position_in_route": 3,
            "priority": 0,
            "service_start_time": "2020-03-06T20:28:52-05:00",
            "service_time": 5400,
            "start": 1583544532000,
            "stop_type": "order",
            "title": "route 0 stop 3",
            "travel_time_from_prev": 209,
            "travel_time_from_prev_no_traffic": 203,
            "travel_time_to_next": 773,
            "travel_time_to_next_no_traffic": 773
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-84.01588, 35.93154],
            "type": "Point"
        },
        "id": 4,
        "properties": {
            "abs_arrival_time": 1583550705,
            "abs_departure_time": 1583556105,
            "abs_service_time_start": 1583550705,
            "address": "100 Lockett Rd, Knoxville, TN 37919, United States",
            "appointment": false,
            "arrival_time": "2020-03-06T22:11:45-05:00",
            "departure_time": "2020-03-06T23:41:45-05:00",
            "description": "abridged beer company",
            "distance_from_prev": 13291.4,
            "distance_to_next": 16240.8,
            "dropoff_position_in_route": -1,
            "end": 1583556105000,
            "id": "route_0_stop_4",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.93154,
            "location_id": "abridged beer company",
            "locked": false,
            "longitude": -84.01588,
            "marker-color": "#ff0000",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Abridged Beer Company",
            "order_id": "abridged beer company",
            "order_ids_dropped_off": [],
            "order_index": 0,
            "parent": "route_0",
            "position_in_route": 4,
            "priority": 0,
            "service_start_time": "2020-03-06T22:11:45-05:00",
            "service_time": 5400,
            "start": 1583550705000,
            "stop_type": "order",
            "title": "route 0 stop 4",
            "travel_time_from_prev": 773,
            "travel_time_from_prev_no_traffic": 773,
            "travel_time_to_next": 897,
            "travel_time_to_next_no_traffic": 890
        },
        "type": "Feature"
    }, {
        "geometry": {
            "coordinates": [-84.148204, 35.902887],
            "type": "Point"
        },
        "id": 5,
        "properties": {
            "abs_arrival_time": 1583557002,
            "abs_departure_time": 1583557002,
            "abs_service_time_start": 1583557002,
            "address": "10936 Parkside Dr, Knoxville, TN 37934, United States",
            "appointment": false,
            "arrival_time": "2020-03-06T23:56:42-05:00",
            "departure_time": "2020-03-06T23:56:42-05:00",
            "description": "home",
            "distance_from_prev": 16240.8,
            "distance_to_next": 0,
            "dropoff_position_in_route": -1,
            "end": 1583557002000,
            "id": "route_0_stop_5",
            "idle_time": 0,
            "items_delivered": [],
            "items_picked_up": [],
            "items_replenished": [],
            "items_unloaded": [],
            "journey_time": -1,
            "latitude": 35.9028866,
            "location_id": "home",
            "locked": false,
            "longitude": -84.1482036,
            "marker-color": "#ff0000",
            "marker-size": "small",
            "marker-symbol": "beer",
            "name": "Home",
            "order_id": "NA",
            "order_ids_dropped_off": [],
            "order_index": -1,
            "parent": "route_0",
            "position_in_route": 5,
            "priority": -1,
            "service_start_time": "2020-03-06T23:56:42-05:00",
            "service_time": 0,
            "start": 1583557002000,
            "stop_type": "end_location",
            "title": "route 0 stop 5",
            "travel_time_from_prev": 897,
            "travel_time_from_prev_no_traffic": 890,
            "travel_time_to_next": 0,
            "travel_time_to_next_no_traffic": 0
        },
        "type": "Feature"
    }],
    "metadata": {
        "abs_route_end_time": 1583557002,
        "abs_route_start_time": 1583532000,
        "abs_shift_end_time": 1583560800,
        "abs_shift_start_time": 1583532000,
        "average_bearing": "ENE",
        "breaks": [],
        "end": 1583557002000,
        "floating_breaks": [],
        "id": "route_0",
        "itinerary": [{
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-06T17:00:00-05:00",
            "time_to": "2020-03-06T17:24:53-05:00"
        }, {
            "action": "service order elst brewing company",
            "time_from": "2020-03-06T17:24:53-05:00",
            "time_to": "2020-03-06T18:54:53-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-06T18:54:53-05:00",
            "time_to": "2020-03-06T18:55:23-05:00"
        }, {
            "action": "service order fanatic brewing co ",
            "time_from": "2020-03-06T18:55:23-05:00",
            "time_to": "2020-03-06T20:25:23-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-06T20:25:23-05:00",
            "time_to": "2020-03-06T20:28:52-05:00"
        }, {
            "action": "service order hexagon brewing company",
            "time_from": "2020-03-06T20:28:52-05:00",
            "time_to": "2020-03-06T21:58:52-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-06T21:58:52-05:00",
            "time_to": "2020-03-06T22:11:45-05:00"
        }, {
            "action": "service order abridged beer company",
            "time_from": "2020-03-06T22:11:45-05:00",
            "time_to": "2020-03-06T23:41:45-05:00"
        }, {
            "action": "driving to arrival w./ no break",
            "time_from": "2020-03-06T23:41:45-05:00",
            "time_to": "2020-03-06T23:56:42-05:00"
        }],
        "max_num_items_in_vehicle": 0,
        "max_segment_length": 25767.4,
        "max_segment_time": 1493,
        "max_volume_in_vehicle": 0,
        "max_weight_in_vehicle": 0,
        "metrics": [],
        "name": "Route 0",
        "num_breaks": 0,
        "num_floating_breaks": 0,
        "num_soft_breaks": 0,
        "num_stops": 6,
        "route_distance": 58322.600000000006,
        "route_end_location_id": "home",
        "route_end_time": "2020-03-06T23:56:42-05:00",
        "route_id": "Vehicle:uber-Shift:crawl_shift_0",
        "route_start_location_id": "home",
        "route_start_time": "2020-03-06T17:00:00-05:00",
        "route_traffic_time": 266,
        "route_travel_time": 3402,
        "route_working_time": 25002,
        "shift_end_time": "2020-03-07T01:00:00",
        "shift_id": "crawl_shift_0",
        "shift_start_time": "2020-03-06T17:00:00",
        "slack_time": 3798,
        "soft_breaks": [],
        "start": 1583532000000,
        "start_items": [],
        "total_break_time": 0,
        "total_floating_break_time": 0,
        "total_idle_time": 0,
        "total_items_delivered": [],
        "total_items_picked_up": [],
        "total_soft_break_time": 0,
        "vehicle_id": "uber"
    },
    "type": "FeatureCollection"
};

// Parse stop data into series
var stopData = routeData.features.map(function (feature, i) {
    return feature.properties;
});
stopData.push(routeData.metadata);

var series = [{
    name: "Route 0",
    data: stopData
}];

console.log(series);

function distinctColors(i) {
    // Generate colors (as Chroma.js objects)
    var colors = paletteGenerator.generate(
        i, // Colors
        function (color) { // This function filters valid colors
            var hcl = color.hcl();
            return hcl[0] >= 0 && hcl[0] <= 360 &&
                hcl[1] >= 40 && hcl[1] <= 70 &&
                hcl[2] >= 15 && hcl[2] <= 85;
        },
        false, // Using Force Vector instead of k-Means
        50, // Steps (quality)
        false, // Ultra precision
        'Compromise' // Color distance type (colorblindness)
    );
    // Sort colors by differenciation first
    return paletteGenerator.diffSort(colors, 'Compromise');
}

Highcharts.theme = {
    "colors": distinctColors(10).map(x => x.hex()),
    "chart": {
        "backgroundColor": "#F0F0F0",
        "plotBorderColor": "#606063",
        "style": {
            "fontFamily": "Roboto",
            "color": "#3C3C3C"
        }
    },
    "title": {
        "align": "left",
        "style": {
            "fontWeight": "bold"
        }
    },
    "subtitle": {
        "align": "left"
    },
    "xAxis": {
        "gridLineWidth": 1,
        "gridLineColor": "#D7D7D8",
        "labels": {
            "style": {
                "fontFamily": "Unica One, sans-serif",
                "color": "#3C3C3C"
            }
        },
        "lineColor": "#D7D7D8",
        "minorGridLineColor": "#505053",
        "tickColor": "#D7D7D8",
        "tickWidth": 1,
        "title": {
            "style": {
                "color": "#A0A0A3"
            }
        }
    },
    "yAxis": {
        "gridLineColor": "#D7D7D8",
        "labels": {
            "style": {
                "fontFamily": "Unica One, sans-serif",
                "color": "#3C3C3C"
            }
        },
        "lineColor": "#D7D7D8",
        "minorGridLineColor": "#505053",
        "tickColor": "#D7D7D8",
        "tickWidth": 1,
        "title": {
            "style": {
                "color": "#A0A0A3"
            }
        }
    },
    "tooltip": {
        "backgroundColor": "rgba(0, 0, 0, 0.85)",
        "style": {
            "color": "#F0F0F0"
        }
    },
    "legend": {
        "itemStyle": {
            "color": "#3C3C3C"
        },
        "itemHiddenStyle": {
            "color": "#606063"
        }
    },
    "credits": {
        "style": {
            "color": "#666"
        }
    },
    "labels": {
        "style": {
            "color": "#D7D7D8"
        }
    },
    "legendBackgroundColor": "rgba(0, 0, 0, 0.5)",
    "background2": "#505053",
    "dataLabelsColor": "#B0B0B3",
    "textColor": "#C0C0C0",
    "contrastTextColor": "#F0F0F3",
    "maskColor": "rgba(255,255,255,0.3)"
};
Highcharts.setOptions(Highcharts.theme);

var defined = Highcharts.defined;
var reduce = Highcharts.reduce;
Highcharts.ganttChart('gantt-container', {
    navigator: {
        enabled: true,
        liveRedraw: true,
        series: {
            type: 'gantt',
            pointPlacement: 0.5,
            pointPadding: 0.25
        },
        yAxis: {
            min: 0,
            max: 3,
            reversed: true,
            categories: []
        }
    },
    scrollbar: {
        enabled: true
    },
    rangeSelector: {
        enabled: true,
        selected: 0
    },
    series: series,
    tooltip: {
        pointFormatter: function () {
            var point = this;
            var lines = [{
                title: 'Arrive',
                value: new Date(point.arrival_time).toLocaleString()
            }, {
                title: 'Depart',
                value: new Date(point.departure_time).toLocaleString()
            }];
            return reduce(lines, function (str, line) {
                var s = '',
                    style = (
                        defined(line.style) ? line.style : 'font-size: 1.0em;'
                    );
                if (line.visible !== false) {
                    s = (
                        '<span style="' + style + '">' +
                        (defined(line.title) ? line.title + ': ' : '') +
                        (defined(line.value) ? line.value : '') +
                        '</span><br/>'
                    );
                }
                return str + s;
            }, '');
        }
    },
    title: {
        text: 'Knoxville Ale Trail Route'
    },
    xAxis: {
        currentDateIndicator: true
    }
});